<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
{% extends 'base.html' %}

{% block stylesheets %}
<link rel="stylesheet" href="create_message.css">

{% endblock %}

{% block main %}
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="alert alert-{{category}} alert-dismissible fade show">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  {{message}}
</div>
{% endfor %}
{% endif %}
{% endwith %}
<div class="message">
  Create a Message
</div>

<!-- The file upload form used as target for the file upload widget -->
<form id="upload" action="" method="POST" onsubmit="Init()" enctype="multipart/form-data">
  <div class="dropdown-box">
    <label for="to" id="dropdown-label">To</label>
      <select id="dropdown" name="dept">
        <option disabled selected value>Select option</option>
        {% for department in dept %}
        {% if department[1] != session['username'] %}
        <option value="{{ department[1] }}">{{ department[1] }}</option>
        {% endif %}
        {% endfor %}
      </select>
    </div>
    <fieldset>
      <div class="form-group"><label for="fileID" id="file-ID">File ID</label><input type="text" id="fid" name="fid"></div>
      <div id="filediv">
        <div class="form-group"><textarea class="textarea" name="description" id="description" class="form-control">Description...</textarea></div>
        <div class="row files" id="files1">
          <label for="fileselect" class="font-weight-bold">Files to upload:</label>
          <input type="file" titlr="" id="fileselect" name="files1" multiple="multiple" class="btn btn-secondary btn-sm" />
          <ul class="fileList"></ul>
        </div>
        <div class="row files" id="files2">
          <label for="signselect" class="font-weight-bold">Signature:</label>
          <input type="file" titlr="" id="signselect" name="files2" multiple="multiple" class="btn btn-secondary btn-sm" />
          <ul class="fileList"></ul>
        </div>
        <div id="previewbutton">
          <button id="upl" type="submit">Preview and Upload <i style="padding-left:3px;font-size:15px;" class="fa fa-upload"></i></button>
        </div>
      </div>
    </fieldset>
    <div id="preview">
      <p><strong>Preview</strong></p>
      </div>
  </form>
{% endblock %}
{% block scripts %}
<script src=create_message.js"></script>
{% endblock %}
